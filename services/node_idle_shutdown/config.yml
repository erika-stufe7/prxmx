# Node Idle Shutdown Service Configuration

# Service aktivieren/deaktivieren
enabled: false  # Auf true setzen um Service zu aktivieren

# Prüfintervall in Sekunden (wie oft auf Idle-Zustand geprüft wird)
check_interval: 300  # Alle 5 Minuten prüfen

# Node-Namen die überwacht werden sollen (leer = alle Nodes)
# Wenn leer, wird nur der lokale Node überwacht auf dem der Service läuft
monitored_nodes: []
# Beispiel: ['pve01', 'pve02']

# Tag das "sicherer Shutdown" signalisiert
# VMs/Container MIT diesem Tag sind unkritisch und blockieren NICHT den Node-Shutdown
safe_shutdown_tag: "safe-shutdown"

# Wartezeit nach Idle-Erkennung bevor Node heruntergefahren wird (Sekunden)
# Gibt Admin Zeit zu reagieren oder verhindert flapping
grace_period: 60

# Dry-Run Modus: Nur loggen, Node NICHT wirklich herunterfahren
dry_run: true  # Auf false setzen für echten Shutdown

# Minimum Uptime in Sekunden bevor Shutdown erlaubt ist
# Verhindert sofortigen Shutdown nach Node-Boot
min_uptime: 600  # 10 Minuten

# Maximum aufeinanderfolgende Fehler bevor Service stoppt
# Verhindert endlose Fehler-Loops bei falscher Config
max_consecutive_errors: 10

# Nur State-Änderungen loggen (reduziert Log-Spam)
log_state_changes_only: true
